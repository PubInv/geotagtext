 <!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Draw GeoJSON points</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.css' rel='stylesheet' />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:10%; bottom:0; width:100%; }
    </style>
</head>
    <body>
    Upload a local file to read Exif data.
    <br/>
    <input id="file-input" type="file" />
    <br/><br/>
      <div id='inputarea'>
	Upload a geotagged photo:
    <input id="upload_button" type='button'>
    UPLOAD
	</input>
	</div>

    <div id='map'></div>
    
    <script type="text/javascript" src="exif.js"></script>    
<script>
        document.getElementById("file-input").onchange = function(e) {
            var file = e.target.files[0]
            if (file && file.name) {
                EXIF.getData(file, function() {
        var exifData = EXIF.pretty(this);
		var lat = this.exifdata.GPSLatitude;
	var lon = this.exifdata.GPSLongitude;
		    alert("lat : " + lat + " " + lon);
		    
		    var marker = new mapboxgl.Marker()
			.setLngLat([30.5, 50.5])
			.addTo(map);

		    
                    if (exifData) {
                        alert(exifData);
                    } else {
                        alert("No EXIF data found in image '" + file.name + "'.");
                    }
                });
            }
        }
  
mapboxgl.accessToken = 'pk.eyJ1Ijoicm9iZXJ0bHJlYWQiLCJhIjoiY2prcHdhbHFnMGpnbDNwbG12ZTFxNnRnOSJ9.1ilsD8zwoacBHbbeP0JLpQ';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v9',
    center: [-96, 37.8],
    zoom: 3
});

map.on('load', function () {

    map.addLayer({
        "id": "points",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [{
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [-80.5204, 43.46667 ]
                    },
                    "properties": {
                        "title": "Waterloo",
                        "icon": "monument"
                    }
                }, {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [-122.414, 37.776]
                    },
                    "properties": {
                        "title": "Mapbox SF",
                        "icon": "harbor"
                    }
                }]
            }
        },
        "layout": {
            "icon-image": "{icon}-15",
            "text-field": "{title}",
            "text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
            "text-offset": [0, 0.6],
            "text-anchor": "top"
        }
    });
});
</script>

</body>
</html>
